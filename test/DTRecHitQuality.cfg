process DTRecHitQualityFromSimHit = {

  include "FWCore/MessageService/data/MessageLogger.cfi"
    replace MessageLogger.cout.threshold = "ERROR"
    replace MessageLogger.cerr.default.limit = 10


#include "Configuration/ReleaseValidation/data/Services.cfi"
  include "Configuration/StandardSequences/data/FakeConditions.cff"

    
  service = RandomNumberGeneratorService
  {
    untracked uint32 sourceSeed = 98765
      PSet moduleSeeds =
      {
        untracked uint32 VtxSmeared = 98765432
        untracked uint32 g4SimHits = 13579
        untracked uint32 mix = 24680
      }
  }
    
  include "SimGeneral/HepPDTESSource/data/pdt.cfi"
    source = PoolSource{
	untracked vstring fileNames = {

#'rfio:/castor/cern.ch/cms/store/RelVal/2007/6/4/RelVal-RelVal150pre5SingleMuPlusPt100-1180945983/0000/800D3AA4-A812-DC11-8F36-00304870DA65.root',
#'rfio:/castor/cern.ch/cms/store/RelVal/2007/6/4/RelVal-RelVal150pre5SingleMuPlusPt100-1180945983/0000/A0E12EEA-9C12-DC11-876F-003048767EFB.root'
# 'rfio:/castor/cern.ch/cms/store/RelVal/2007/6/4/RelVal-RelVal150pre5SingleMuPlusPt10-1180945983/0000/2ED6D044-AA12-DC11-94A7-001731AF698F.root',
# 'rfio:/castor/cern.ch/cms/store/RelVal/2007/6/4/RelVal-RelVal150pre5SingleMuPlusPt10-1180945983/0000/EEC7454D-9E12-DC11-B85C-00304875AB59.root'

'rfio:/castor/cern.ch/cms/store/mc/2006/12/22/mc-physval-120-ZToMuMu-LowLumiPU/0021/0A49CDAD-FA9F-DB11-95DA-001731AF664F.root',
'rfio:/castor/cern.ch/cms/store/mc/2006/12/22/mc-physval-120-ZToMuMu-LowLumiPU/0021/12AD15AE-FA9F-DB11-90A8-003048754E4D.root'

#"rfio:/castor/cern.ch/user/b/bellan/Software/Samples/CMSSW_1_5_0_pre1/2007_05_03/single_mu_pt_5_200_positive.root"
	}
	untracked uint32 debugVebosity = 1
	untracked bool   debugFlag     = true
    }
     untracked PSet maxEvents = {untracked int32 input = -1}
  
    include "SimMuon/Configuration/data/SimMuon.cff"
    replace muonDTDigis.Smearing = 0.
    
    module mix = MixingModule {
      int32 bunchspace = 25
    }

#     source = FlatRandomPtGunSource 
#     { 
#       untracked uint32 firstRun  =  1
#         untracked int32  maxEvents = 1000
#         untracked PSet  PGunParameters =
#         {
# # you can request more than 1 particle
# #untracked vint32  PartID = { 211, 11, -13 }
#           untracked vint32 PartID = {13, -13} 
#           untracked double MinEta = -1.3
#             untracked double MaxEta = 1.3
# #
# # phi must be given in radians
# #
#             untracked double MinPhi = -3.14159265358979323846
#             untracked double MaxPhi =  3.14159265358979323846
#             untracked double MinPt  =  10.
#             untracked double MaxPt  = 100.
#         }
#       untracked int32 Verbosity = 0 # set to 1 (or greater)  for printouts
#         untracked bool  AddAntiParticle = false   # if you turn it ON, for each particle
# # an anti-particle will be generated,
# # with 3-mom opposite to the particle's
#     }
#     include "IOMC/EventVertexGenerators/data/VtxSmearedGauss.cfi"

#     include "SimG4Core/Configuration/data/SimG4Core.cff"

#     include "SimMuon/Configuration/data/SimMuon.cff"
#     replace muonDTDigis.Smearing = 0.
#     
#     module mix = MixingModule {
#     int32 bunchspace = 25
#     }

    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    
    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
    include "Geometry/DTGeometry/data/dtGeometry.cfi"
    include "Geometry/MuonNumbering/data/muonNumberingInitialization.cfi"

 include "RecoLocalMuon/Configuration/data/RecoLocalMuon.cff"    
#    include "CalibMuon/Configuration/data/DT_FakeConditions.cff"
#   include "CalibMuon/Configuration/data/DT_FrontierConditions.cff"
#     include "RecoLocalMuon/Configuration/data/DTRecoLocalMuonCSA07.cff"

    module rechivalidation = DTRecHitQuality{
    # Switch on/off the verbosity
    untracked bool debug = false
    # Lable to retrieve SimHits from the event
    untracked string simHitLabel = 'g4SimHits'
    # Lable to retrieve RecHits from the event
    untracked string recHitLabel = 'dt1DRecHits'
    # Lable to retrieve 2D segments from the event
    untracked string segment2DLabel = 'dt2DSegments'
    # Lable to retrieve 4D segments from the event
    untracked string segment4DLabel = 'dt4DSegments'
    # Switches for analysis at various steps
    untracked bool doStep1 = true
    untracked bool doStep2 = true
    untracked bool doStep3 = true
    # Name of the root file which will contain the histos
    untracked string rootFileName = "DTRecHitQualityPlots.root"
    }   
    
    module seg2dvalidation = DTSegment2DQuality{
    # Switch on/off the verbosity
    untracked bool debug = false
    # Lable to retrieve SimHits from the event
    untracked string simHitLabel = 'g4SimHits'
    # Lable to retrieve 2D segments from the event
    untracked string segment2DLabel = 'dt2DSegments'
    double sigmaResPos = 0.013
    double sigmaResAngle = 0.008
    
    # Name of the root file which will contain the histos
    untracked string rootFileName = "DTSeg2DQualityPlots.root"
    }
    
    module seg2dsuperphivalidation = DTSegment2DSLPhiQuality{
    # Switch on/off the verbosity
    untracked bool debug = false
    # Lable to retrieve SimHits from the event
    untracked string simHitLabel = 'g4SimHits'
    # Lable to retrieve 2D segments from the event
    untracked string segment4DLabel = 'dt4DSegments'
    double sigmaResPos = 0.013
    double sigmaResAngle = 0.008
    
    # Name of the root file which will contain the histos
    untracked string rootFileName = "DTSeg2DSLPhiQualityPlots.root"
    }
    
    module seg4dvalidation = DTSegment4DQuality{
    # Switch on/off the verbosity
    untracked bool debug = false
    # Lable to retrieve SimHits from the event
    untracked string simHitLabel = 'g4SimHits'
    # Lable to retrieve 4D segments from the event
    untracked string segment4DLabel = 'dt4DSegments'
    #resolution on position
    double sigmaResX = 0.01
    double sigmaResY = 0.05
    #resolution on angle
    double sigmaResAlpha = 0.001
    double sigmaResBeta = 0.007
    
    # Name of the root file which will contain the histos
    untracked string rootFileName = "DTSeg4DQualityPlots.root"
    }
    
    # Run from SimHits
    #path p = {VtxSmeared, g4SimHits, mix, muonDTDigis, dt1DRecHits, dt2DSegments, dt4DSegments, rechivalidation, seg2dvalidation, seg2dsuperphivalidation,seg4dvalidation}
    #path p = {mix, muonDTDigis, dt1DRecHits, dt2DSegments,dt4DSegments,
#    	rechivalidation, seg2dvalidation, seg2dsuperphivalidation,seg4dvalidation}

    # Run from digis
    # path p = {dt1DRecHits, dt2DSegments, dt4DSegments, rechivalidation, seg2dvalidation, seg2dsuperphivalidation, seg4dvalidation}
 #    path p = {dt1DRecHits, dt2DSegments,dt4DSegments, rechivalidation, seg2dvalidation, seg2dsuperphivalidation,seg4dvalidation}

    # Run from RecHits
    # path p = {dt2DSegments, rechivalidation, seg2dvalidation,seg2dsuperphivalidation,seg4dvalidation}
    # path p = {rechivalidation, seg2dvalidation,seg2dsuperphivalidation,seg4dvalidation}

    path p = {rechivalidation, seg2dvalidation, seg2dsuperphivalidation, seg4dvalidation}

}


